# Create Network

docker network create goals

# Run mongoDB Container

docker run --name mongodb \
  -e MONGO_INITDB_ROOT_USERNAME=pnowak \
  -e MONGO_INITDB_ROOT_PASSWORD=secret \
  -v data:/data/db \
  --rm \
  -d \
  --network goals \
  mongo

# Build Node API Image

docker build -t goals-node .

# Run Node API container

docker run --name goals-backend \
  -d MONGODB_USERNAME=pnowak \
  -d MONGODB_PASSWORD=secret \
  -v logs:/app/logs \
  -v $(pwd):/app \
  -v /app/node_modules \
  --rm \
  -d \
  --network goals \
  -p 80:80 \
  goals-node

# Build React SPA Image

docker build -t goals-react .

# Run React SPA Container

docker run --name goals-frontend \
  -v $(pwd)/src:/app/src \
  --rm \
  -d \
  -p 3000:3000 \
  -it \
  goals-react 

# Stop all Containers

docker stop mongodb goals-backend goals-frontend
